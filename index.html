<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WAV â†’ MP3 ë³€í™˜ê¸° (ë¸Œë¼ìš°ì €)</title>
  <meta name="description" content="âœ¨ ë³€í™˜ì€ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ìˆ˜í–‰ë©ë‹ˆë‹¤. (ì„œë²„ ì—…ë¡œë“œ ì—†ìŒ) ğŸ”§ MP3 ì¸ì½”ë”©ì„ ìœ„í•´ ffmpeg.wasmì„ ë¡œë“œí•©ë‹ˆë‹¤." />
  <meta property="og:title" content="WAV â†’ MP3 ë³€í™˜ê¸° (ë¸Œë¼ìš°ì €)" />
  <meta property="og:description" content="âœ¨ ë³€í™˜ì€ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ìˆ˜í–‰ë©ë‹ˆë‹¤. (ì„œë²„ ì—…ë¡œë“œ ì—†ìŒ) ğŸ”§ MP3 ì¸ì½”ë”©ì„ ìœ„í•´ ffmpeg.wasmì„ ë¡œë“œí•©ë‹ˆë‹¤." />
  <meta property="og:image" content="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'><defs><linearGradient id='ogGrad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' style='stop-color:%23667eea;stop-opacity:1' /><stop offset='100%' style='stop-color:%23764ba2;stop-opacity:1' /></linearGradient></defs><rect width='1200' height='630' fill='url(%23ogGrad)'/><text x='600' y='280' font-family='Arial, sans-serif' font-size='72' font-weight='bold' fill='white' text-anchor='middle'>ğŸµ WAV â†’ MP3 ë³€í™˜ê¸°</text><text x='600' y='380' font-family='Arial, sans-serif' font-size='32' fill='rgba(255,255,255,0.9)' text-anchor='middle'>ë¸Œë¼ìš°ì €ì—ì„œ ì•ˆì „í•˜ê²Œ ë³€í™˜í•˜ì„¸ìš”</text><path d='M200 500 L200 400 L250 380 L250 480 Z M350 500 L350 350 L400 330 L400 480 Z M500 500 L500 400 L550 380 L550 480 Z M650 500 L650 350 L700 330 L700 480 Z M800 500 L800 400 L850 380 L850 480 Z' fill='white' opacity='0.8'/><circle cx='225' cy='400' r='8' fill='white'/><circle cx='375' cy='350' r='8' fill='white'/><circle cx='525' cy='400' r='8' fill='white'/><circle cx='675' cy='350' r='8' fill='white'/><circle cx='825' cy='400' r='8' fill='white'/></svg>" />
  <meta property="og:type" content="website" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='grad' x1='0%' y1='0%' x2='100%' y2='100%'><stop offset='0%' style='stop-color:%23667eea;stop-opacity:1' /><stop offset='100%' style='stop-color:%23764ba2;stop-opacity:1' /></linearGradient></defs><rect width='100' height='100' rx='20' fill='url(%23grad)'/><path d='M30 70 L30 40 L40 35 L40 65 Z M50 70 L50 30 L60 25 L60 65 Z M70 70 L70 35 L80 30 L80 65 Z' fill='white' opacity='0.9'/><circle cx='35' cy='40' r='3' fill='white'/><circle cx='55' cy='30' r='3' fill='white'/><circle cx='75' cy='35' r='3' fill='white'/></svg>" />
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
      margin: 0;
      padding: 24px;
      line-height: 1.6;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .card {
      max-width: 720px;
      width: 100%;
      background: rgba(255, 255, 255, 0.98);
      border-radius: 24px;
      padding: 32px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
    }
    
    h1 {
      margin: 0 0 12px;
      font-size: 32px;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
      margin: 20px 0;
    }
    
    label {
      font-weight: 600;
      color: #333;
      min-width: 120px;
    }
    
    input[type="file"] {
      width: 100%;
      padding: 12px;
      border: 2px dashed #667eea;
      border-radius: 12px;
      background: #f8f9ff;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
    }
    
    input[type="file"]:hover {
      border-color: #764ba2;
      background: #f0f2ff;
    }
    
    select {
      padding: 12px 16px;
      border-radius: 12px;
      border: 2px solid #e0e0e0;
      background: white;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 140px;
    }
    
    select:hover {
      border-color: #667eea;
    }
    
    select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    button {
      padding: 12px 24px;
      border-radius: 12px;
      border: none;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }
    
    button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
    }
    
    button:active:not(:disabled) {
      transform: translateY(0);
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    .muted {
      color: #666;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .log {
      white-space: pre-wrap;
      background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
      border: 2px solid #e8eaff;
      padding: 16px;
      border-radius: 12px;
      height: 200px;
      overflow: auto;
      font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.5;
      color: #333;
    }
    
    .log::-webkit-scrollbar {
      width: 8px;
    }
    
    .log::-webkit-scrollbar-track {
      background: #f0f0f0;
      border-radius: 4px;
    }
    
    .log::-webkit-scrollbar-thumb {
      background: #667eea;
      border-radius: 4px;
    }
    
    .log::-webkit-scrollbar-thumb:hover {
      background: #764ba2;
    }
    
    .ok {
      color: #10b981;
      font-weight: 700;
    }
    
    .warn {
      color: #f59e0b;
      font-weight: 700;
    }
    
    #status {
      padding: 12px 16px;
      background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
      border-radius: 12px;
      border-left: 4px solid #667eea;
      font-weight: 500;
    }
    
    #download {
      display: inline-flex;
      align-items: center;
      padding: 14px 24px;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      text-decoration: none;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
    }
    
    #download:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
    }
    
    .tip-box {
      margin-top: 20px;
      padding: 16px;
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border-radius: 12px;
      border-left: 4px solid #f59e0b;
    }
    
    .other-services {
      margin-top: 24px;
      padding-top: 24px;
      border-top: 2px solid #e8eaff;
      text-align: center;
    }
    
    .other-services-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
      text-decoration: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
    }
    
    .other-services-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(245, 158, 11, 0.5);
    }
    
    .lang-switch {
      position: absolute;
      top: 24px;
      right: 24px;
      display: flex;
      gap: 8px;
    }
    
    .lang-switch button {
      padding: 8px 16px;
      border-radius: 8px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.2);
      color: white;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }
    
    .lang-switch button:hover {
      background: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
    }
    
    .lang-switch button.active {
      background: rgba(255, 255, 255, 0.9);
      color: #667eea;
      border-color: rgba(255, 255, 255, 0.9);
    }
    
    @media (max-width: 640px) {
      body {
        padding: 16px;
      }
      
      .card {
        padding: 24px;
      }
      
      h1 {
        font-size: 24px;
      }
      
      .row {
        flex-direction: column;
        align-items: stretch;
      }
      
      label {
        min-width: auto;
        margin-bottom: 8px;
      }
      
      select, button {
        width: 100%;
      }
      
      .lang-switch {
        position: static;
        margin-bottom: 16px;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="lang-switch">
    <button class="active">í•œêµ­ì–´</button>
    <button onclick="window.location.href='en.html'">English</button>
  </div>
  
  <div class="card">
    <h1>ğŸµ WAV â†’ MP3 ë³€í™˜ê¸°</h1>
    <div class="muted" style="margin-bottom: 8px;">
      âœ¨ ë³€í™˜ì€ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ìˆ˜í–‰ë©ë‹ˆë‹¤. (ì„œë²„ ì—…ë¡œë“œ ì—†ìŒ)<br>
      ğŸ”§ MP3 ì¸ì½”ë”©ì„ ìœ„í•´ ffmpeg.wasmì„ ë¡œë“œí•©ë‹ˆë‹¤.
      <br><a href="guide.html" style="color: #667eea; text-decoration: none; font-weight: 600; margin-top: 8px; display: inline-block;">ğŸ“– ì‚¬ìš© ê°€ì´ë“œ ë³´ê¸° â†’</a>
    </div>

    <div class="row" style="margin-top:16px;">
      <label for="wavFile">WAV íŒŒì¼</label>
      <input id="wavFile" type="file" accept=".wav,audio/wav" />
    </div>

    <div class="row">
      <label for="bitrate">MP3 ë¹„íŠ¸ë ˆì´íŠ¸</label>
      <select id="bitrate">
        <option value="96k">96 kbps</option>
        <option value="128k" selected>128 kbps</option>
        <option value="192k">192 kbps</option>
        <option value="256k">256 kbps</option>
        <option value="320k">320 kbps</option>
      </select>

      <button id="btnLoad">1) ë³€í™˜ ì—”ì§„ ë¡œë“œ</button>
      <button id="btnConvert" disabled>2) MP3ë¡œ ë³€í™˜</button>
    </div>

    <div class="row">
      <div id="status" class="muted">ìƒíƒœ: ëŒ€ê¸° ì¤‘</div>
    </div>

    <div class="row">
      <a id="download" href="#" download style="display:none; font-weight:700;">MP3 ë‹¤ìš´ë¡œë“œ</a>
    </div>

    <div class="log" id="log"></div>

    <div class="tip-box">
      <div class="muted" style="margin:0;">
        <span class="warn">ğŸ’¡ íŒ</span>:
        íŒŒì¼ì´ í¬ë©´(ìˆ˜ì‹­~ìˆ˜ë°± MB) ë³€í™˜ì— ì‹œê°„ì´ ê±¸ë¦¬ê³ , ëª¨ë°”ì¼ì€ ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ ì‹¤íŒ¨í•  ìˆ˜ ìˆì–´ìš”.
      </div>
    </div>
    
    <div class="other-services">
      <a href="https://funnyfunny.cloud" target="_blank" rel="noopener noreferrer" class="other-services-btn">
        ğŸŒ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°
      </a>
    </div>
  </div>

  <!-- ffmpeg.wasm (UMD) -->
  <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.15/dist/umd/ffmpeg.min.js"></script>
  <script>
    // UMD ë²„ì „ì—ì„œëŠ” ì „ì—­ ê°ì²´ ì´ë¦„ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ
    const { createFFmpeg, fetchFile } = window.FFmpeg || FFmpeg || window;

    const $ = (id) => document.getElementById(id);
    const wavFile = $("wavFile");
    const bitrate = $("bitrate");
    const btnLoad = $("btnLoad");
    const btnConvert = $("btnConvert");
    const status = $("status");
    const logBox = $("log");
    const download = $("download");

    const log = (msg) => {
      logBox.textContent += msg + "\\n";
      logBox.scrollTop = logBox.scrollHeight;
    };

    let ffmpeg = null;
    let loaded = false;

    function setStatus(text) {
      status.textContent = "ìƒíƒœ: " + text;
    }

    btnLoad.addEventListener("click", async () => {
      try {
        btnLoad.disabled = true;
        setStatus("ë³€í™˜ ì—”ì§„ ë¡œë“œ ì¤‘...");
        logBox.textContent = "";

        // corePathë¥¼ jsdelivrë¡œ ì§€ì •í•˜ì—¬ CORS ë¬¸ì œ í•´ê²°
        ffmpeg = createFFmpeg({
          log: true,
          corePath: "https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.js"
        });

        loaded = true;

        setStatus("ë¡œë“œ ì™„ë£Œ âœ… íŒŒì¼ ì„ íƒ í›„ ë³€í™˜í•˜ì„¸ìš”");
        btnConvert.disabled = false;
      } catch (e) {
        console.error(e);
        setStatus("ë¡œë“œ ì‹¤íŒ¨ âŒ (ì½˜ì†” í™•ì¸)");
        log("ë¡œë“œ ì‹¤íŒ¨: " + (e?.message ?? String(e)));
        btnLoad.disabled = false;
      }
    });

    btnConvert.addEventListener("click", async () => {
      if (!loaded || !ffmpeg) return;

      const file = wavFile.files?.[0];
      if (!file) {
        setStatus("WAV íŒŒì¼ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”");
        return;
      }

      download.style.display = "none";
      download.href = "#";

      const inName = "input.wav";
      const outName = "output.mp3";

      try {
        btnConvert.disabled = true;
        setStatus("íŒŒì¼ ë¡œë”©/ì“°ê¸° ì¤‘...");
        logBox.textContent = "";

        // ê°€ìƒ FSì— ì…ë ¥ íŒŒì¼ ì“°ê¸°
        await ffmpeg.writeFile(inName, await fetchFile(file));

        // ë³€í™˜ ì˜µì…˜:
        // -i input.wav
        // -codec:a libmp3lame : mp3 ì¸ì½”ë”
        // -b:a 128k : ë¹„íŠ¸ë ˆì´íŠ¸
        // -vn : ì˜ìƒ ìŠ¤íŠ¸ë¦¼ ë¬´ì‹œ(ì•ˆì „)
        setStatus("ë³€í™˜ ì¤‘... (ë¸Œë¼ìš°ì €ê°€ ì ì‹œ ë²„ë²…ì¼ ìˆ˜ ìˆì–´ìš”)");
        await ffmpeg.exec([
          "-i", inName,
          "-codec:a", "libmp3lame",
          "-b:a", bitrate.value,
          "-vn",
          outName
        ]);

        setStatus("ê²°ê³¼ ì¶”ì¶œ/ë‹¤ìš´ë¡œë“œ ì¤€ë¹„ ì¤‘...");
        const data = await ffmpeg.readFile(outName);

        const mp3Blob = new Blob([data], { type: "audio/mpeg" });
        const url = URL.createObjectURL(mp3Blob);

        // ë‹¤ìš´ë¡œë“œ íŒŒì¼ëª…: ì›ë³¸ì´ë¦„ ê¸°ë°˜
        const base = file.name.replace(/\\.wav$/i, "");
        download.download = base + ".mp3";
        download.href = url;
        download.style.display = "inline-block";
        download.textContent = "MP3 ë‹¤ìš´ë¡œë“œ (" + download.download + ")";

        setStatus("ì™„ë£Œ âœ…");
        log("ë³€í™˜ ì™„ë£Œ! ìœ„ì˜ ë‹¤ìš´ë¡œë“œ ë§í¬ë¥¼ í´ë¦­í•˜ì„¸ìš”.");

        // ì •ë¦¬(ì„ íƒ): FS íŒŒì¼ ì‚­ì œ
        try {
          ffmpeg.FS("unlink", inName);
          ffmpeg.FS("unlink", outName);
        } catch (_) {}
      } catch (e) {
        console.error(e);
        setStatus("ë³€í™˜ ì‹¤íŒ¨ âŒ (ì½˜ì†” í™•ì¸)");
        log("ë³€í™˜ ì‹¤íŒ¨: " + (e?.message ?? String(e)));
      } finally {
        btnConvert.disabled = false;
      }
    });
  </script>
</body>
</html>
 